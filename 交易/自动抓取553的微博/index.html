<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>自动抓取553的微博 - 乐土为家</title><meta name=description content="尝试了三个库 nghuyong/WeiboSpider 要cookie 图片只能抓到第一张，且不能下载。 能抓取评论 不好用 dataabc/weiboSpider 要cookie 能自动下载全部图片、视频 不能抓取评论 dataabc/weibo-crawler cooki"><link rel=canonical href=https://475300.github.io/%E4%BA%A4%E6%98%93/%E8%87%AA%E5%8A%A8%E6%8A%93%E5%8F%96553%E7%9A%84%E5%BE%AE%E5%8D%9A/><meta property="og:title" content="自动抓取553的微博"><meta property="og:type" content="article"><meta property="og:url" content="https://475300.github.io/%E4%BA%A4%E6%98%93/%E8%87%AA%E5%8A%A8%E6%8A%93%E5%8F%96553%E7%9A%84%E5%BE%AE%E5%8D%9A/"><meta property="og:description" content="尝试了三个库 nghuyong/WeiboSpider 要cookie 图片只能抓到第一张，且不能下载。 能抓取评论 不好用 dataabc/weiboSpider 要cookie 能自动下载全部图片、视频 不能抓取评论 dataabc/weibo-crawler cooki"><meta property="og:site_name" content="乐土为家"><link rel=stylesheet href=https://475300.github.io/css/main.min.46626abaa02257c4c323c7d2f1f872e4a75032f4ab4bea8ceb62daf52bfc81a2.css integrity="sha256-RmJquqAiV8TDI8fS8fhy5KdQMvSrS+qM62La9Sv8gaI="><meta name=generator content="Hugo 0.101.0"><script type=module src=https://unpkg.com/ionicons@5.1.2/dist/ionicons/ionicons.esm.js></script>
<script nomodule src=https://unpkg.com/ionicons@5.1.2/dist/ionicons/ionicons.js></script></head><body><header class=site-header><nav class=site-nav role=navigation aria-label=breadcrumb><ol itemscope itemtype=https://schema.org/BreadcrumbList class=breadcrumb><li class=breadcrumb-item itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemtype=https://schema.org/Thing itemprop=item href=https://475300.github.io/><span itemprop=name>乐土为家</span></a><meta itemprop=position content="0"></li>/<li class=breadcrumb-item itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemtype=https://schema.org/Thing itemprop=item href=https://475300.github.io/%E4%BA%A4%E6%98%93/><span itemprop=name>交易</span></a><meta itemprop=position content="0"></li>/<li class="breadcrumb-item active hidden" aria-current=page itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemtype=https://schema.org/Thing itemprop=item href=https://475300.github.io/%E4%BA%A4%E6%98%93/%E8%87%AA%E5%8A%A8%E6%8A%93%E5%8F%96553%E7%9A%84%E5%BE%AE%E5%8D%9A/><span itemprop=name>自动抓取553的微博</span></a><meta itemprop=position content="1"></li></ol></nav><h1 class="site-title hidden"><a href=https://475300.github.io/>乐土为家</a></h1></header><main id=content><article role=article class="content post h-entry" itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h2 class=post-title itemprop="name headline">自动抓取553的微博</h2><span class=post-meta><time class=date-published datetime=2021-05-30T21:10:42+07:00 itemprop=datePublished>2021.5.30，星期天</time>
<span><ul id=authors><li><a href=https://475300.github.io/authors/enel>@enel</a></li></ul><ul id=tags><li><a href=https://475300.github.io/tags/%E6%88%91%E7%9A%84%E5%81%B6%E5%83%8F553>#我的偶像553</a></li><li><a href=https://475300.github.io/tags/linux>#Linux</a></li><li><a href=https://475300.github.io/tags/todo>#todo</a></li></ul></span></span></header><div class=post-content itemprop=articleBody><p>尝试了三个库</p><ol><li><a href=https://github.com/nghuyong/WeiboSpider target=_blank rel="nofollow noreferrer noopener">nghuyong/WeiboSpider</a><ul><li>要cookie</li><li>图片只能抓到第一张，且不能下载。</li><li>能抓取评论</li><li>不好用</li></ul></li><li><a href=https://github.com/dataabc/weiboSpider target=_blank rel="nofollow noreferrer noopener">dataabc/weiboSpider</a><ul><li>要cookie</li><li>能自动下载全部图片、视频</li><li>不能抓取评论</li></ul></li><li><a href=https://github.com/dataabc/weibo-crawler target=_blank rel="nofollow noreferrer noopener">dataabc/weibo-crawler</a><ul><li>cookie可选。cookie失效后可能抓不全(<a href=https://github.com/dataabc/weibo-crawler#%E6%B7%BB%E5%8A%A0cookie%E4%B8%8E%E4%B8%8D%E6%B7%BB%E5%8A%A0cookie%E7%9A%84%E5%8C%BA%E5%88%AB%E5%8F%AF%E9%80%89 target=_blank rel="nofollow noreferrer noopener">添不添加cookie的区别</a>)</li><li>不能配置抓取间隔，用cookie的话可能cookie可能会容易失效或被封号。</li><li>其他同第2个</li></ul></li></ol><p>综上，选择同时用第二个和第三个（不填cookie），第二个间隔12分钟，第三个间隔6分钟。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=display:flex><span>*<span style=color:#e6db74>/12 * * * * cd ~/</span><span style=color:#a6e22e>weibo</span>/<span style=color:#a6e22e>weibo</span>-<span style=color:#a6e22e>spider</span> &amp;&amp; <span style=color:#a6e22e>python</span> -<span style=color:#a6e22e>m</span> <span style=color:#a6e22e>weibo_spider</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>*<span style=color:#e6db74>/6 * * * * cd ~/</span><span style=color:#a6e22e>weibo</span>/<span style=color:#a6e22e>weibo</span>-<span style=color:#a6e22e>crawler</span> &amp;&amp; <span style=color:#a6e22e>python</span> <span style=color:#a6e22e>weibo</span>.<span style=color:#a6e22e>py</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>存在的问题：</p><ul><li>可能封ip</li><li>可能封号</li><li>cookie失效后更新(<a href=https://github.com/dataabc/weibo-crawler#%E5%A6%82%E4%BD%95%E6%A3%80%E6%B5%8Bcookie%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88%E5%8F%AF%E9%80%89 target=_blank rel="nofollow noreferrer noopener">如何检测cookie是否有效</a>)<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></li><li>不能抓评论</li><li>发布后重新编辑的会怎么处理？<ul><li>第二种记录的时间精确到分钟，所以重新编辑的微博会抓不到。</li><li>第三种记录的时间精确到天，所以有可能可以重复抓到。会直接更新？</li></ul></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>todo: 自动更新cookie。&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div class=pagination><div class=prev><a href=https://475300.github.io/%E4%BA%A4%E6%98%93/%E8%82%A1%E7%A5%A8%E5%BF%85%E8%83%9C%E6%B3%95/>Previous Post</a></div><div class=next><a href=https://475300.github.io/%E4%BA%A4%E6%98%93/%E5%9B%9B%E5%AE%9C%E5%85%AB%E5%BF%8C/>Next Post</a></div></div></main><footer class=site-footer><span class=left><a href=/authors>Authors</a>
.
<a href=/tags>Tags</a></span>
<span class=right><em>乐土为家</em></span></footer></body></html>